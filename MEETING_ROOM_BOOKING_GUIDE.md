# نظام حجز قاعات الاجتماعات

## نظرة عامة
تم إضافة نظام متكامل لحجز قاعات الاجتماعات إلى تطبيق المراسلات، مع التحقق التلقائي من عدم تعارض الحجوزات.

## المكونات الرئيسية

### 1. قاعة الاجتماعات (Meeting Room)
DocType لإدارة قاعات الاجتماعات مع المعلومات التالية:
- **اسم القاعة**: اسم فريد للقاعة
- **السعة**: عدد الأشخاص الذين يمكن استيعابهم
- **الموقع**: موقع القاعة
- **حالة النشاط**: فعالة أم لا
- **الوصف**: وصف عام للقاعة

#### التجهيزات المتاحة:
- جهاز عرض (Projector)
- سبورة بيضاء (Whiteboard)
- نظام مؤتمرات فيديو (Video Conferencing)
- نظام صوتي (Audio System)
- واي فاي (WiFi)
- تكييف هواء (Air Conditioning)

### 2. حجز قاعة الاجتماعات (Meeting Room Booking)
DocType لإدارة الحجوزات مع الميزات التالية:

#### معلومات الحجز:
- **القاعة**: اختيار قاعة الاجتماعات
- **تاريخ الحجز**: تاريخ الاجتماع
- **وقت البداية**: وقت بدء الاجتماع
- **وقت النهاية**: وقت انتهاء الاجتماع
- **الحالة**: معلق، موافق عليه، مرفوض، مكتمل، ملغي
- **المحجوز بواسطة**: المستخدم الذي قام بالحجز
- **القسم**: القسم التابع له

#### تفاصيل الاجتماع:
- **عنوان الاجتماع**: عنوان وصفي للاجتماع
- **وصف الاجتماع**: تفاصيل الاجتماع
- **عدد الحضور**: عدد المشاركين المتوقع

#### المتطلبات:
- يتطلب جهاز عرض
- يتطلب نظام مؤتمرات فيديو
- يتطلب خدمة ضيافة
- متطلبات خاصة (نص حر)

#### تفاصيل الموافقة:
- **تمت الموافقة بواسطة**: المستخدم الذي وافق على الحجز
- **تاريخ الموافقة**: تاريخ ووقت الموافقة
- **سبب الرفض**: في حالة رفض الحجز

## الميزات الرئيسية

### 1. التحقق من التعارض التلقائي
- يتم التحقق تلقائياً من عدم وجود حجوزات متعارضة عند حفظ الحجز
- يعرض النظام رسالة خطأ واضحة مع تفاصيل الحجوزات المتعارضة
- لا يمكن حفظ الحجز إذا كان هناك تعارض

### 2. التحقق من السعة
- يتحقق النظام من أن عدد الحضور لا يتجاوز سعة القاعة
- يعرض تحذير إذا كان العدد أكبر من السعة (لكن لا يمنع الحجز)

### 3. التحقق من التجهيزات
- يتحقق النظام من توفر التجهيزات المطلوبة في القاعة
- يعرض تحذير إذا كانت التجهيزات المطلوبة غير متوفرة

### 4. منع الحجز في الماضي
- لا يمكن إنشاء حجز جديد لتاريخ ووقت في الماضي

### 5. سير عمل الموافقة
- الحجوزات الجديدة تبدأ بحالة "معلق"
- يمكن للمديرين الموافقة أو رفض الحجوزات
- يتم تسجيل تفاصيل الموافقة/الرفض

### 6. واجهة المستخدم المحسنة
- عرض معلومات القاعة (السعة والتجهيزات) عند اختيار القاعة
- أزرار مخصصة للموافقة والرفض وإكمال الحجز
- مؤشرات ملونة للحالات المختلفة
- زر لعرض جميع حجوزات قاعة معينة

## التقارير

### تقرير جدول قاعات الاجتماعات (Meeting Room Schedule)
تقرير شامل يعرض:
- رقم الحجز
- قاعة الاجتماعات
- التاريخ
- وقت البداية والنهاية
- المدة (بالساعات)
- عنوان الاجتماع
- المحجوز بواسطة
- القسم
- الحالة
- عدد الحضور

#### الفلاتر المتاحة:
- من تاريخ / إلى تاريخ
- قاعة الاجتماعات
- الحالة
- القسم

## الصلاحيات

### System Manager
- جميع الصلاحيات (إنشاء، تعديل، حذف، موافقة)

### Correspondence Manager
- إنشاء وتعديل وموافقة على الحجوزات
- إدارة قاعات الاجتماعات

### Correspondence User
- إنشاء حجوزات جديدة
- عرض الحجوزات والتقارير
- عرض قاعات الاجتماعات

## API Methods

### check_room_availability
```python
frappe.call({
    method: 'correspondence.correspondence.doctype.meeting_room_booking.meeting_room_booking_api.check_room_availability',
    args: {
        room: 'اسم القاعة',
        date: '2025-12-10',
        start_time: '09:00:00',
        end_time: '11:00:00',
        current_booking: 'اسم الحجز الحالي (اختياري)'
    }
})
```

### get_room_schedule
```python
frappe.call({
    method: 'correspondence.correspondence.doctype.meeting_room_booking.meeting_room_booking_api.get_room_schedule',
    args: {
        room: 'اسم القاعة',
        date: '2025-12-10'
    }
})
```

## الاستخدام

### إنشاء قاعة اجتماعات جديدة:
1. انتقل إلى Correspondence > Meeting Room
2. انقر على "جديد"
3. أدخل اسم القاعة، السعة، الموقع
4. حدد التجهيزات المتاحة
5. احفظ

### حجز قاعة اجتماعات:
1. انتقل إلى Correspondence > Meeting Room Booking
2. انقر على "جديد"
3. اختر القاعة والتاريخ والوقت
4. أدخل تفاصيل الاجتماع
5. حدد المتطلبات الخاصة
6. احفظ وأرسل (Submit)
7. سيتحقق النظام تلقائياً من عدم وجود تعارض

### الموافقة على حجز:
1. افتح الحجز المعلق
2. انقر على "Actions" > "Approve"
3. أو انقر على "Actions" > "Reject" وأدخل سبب الرفض

### عرض جدول القاعات:
1. انتقل إلى Correspondence > Meeting Room Schedule
2. حدد نطاق التاريخ والفلاتر المطلوبة
3. انقر على "تحديث"

## الملاحظات
- جميع الحجوزات قابلة للتعديل (Submittable)
- يتم تتبع جميع التغييرات (Track Changes)
- يمكن إلغاء الحجز (Cancel) مما يغير الحالة إلى "ملغي"
- النظام يدعم البحث الشامل في عناوين الاجتماعات
